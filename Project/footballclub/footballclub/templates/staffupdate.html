{%load static%}
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">
    <meta name="author" content="Hau Nguyen">
    <meta name="keywords" content="au theme template">

    <!-- Title Page-->
    <title>Dashboard 4</title>

  <!-- Fontfaces CSS -->
<link href="{% static 'css/css/font-face.css' %}" rel="stylesheet" media="all">
<link href="{% static 'vendor/font-awesome-4.7/css/font-awesome.min.css' %}" rel="stylesheet" media="all">
<link href="{% static 'vendor/font-awesome-5/css/fontawesome-all.min.css' %}" rel="stylesheet" media="all">
<link href="{% static 'vendor/mdi-font/css/material-design-iconic-font.min.css' %}" rel="stylesheet" media="all">

<!-- Bootstrap CSS -->
<link href="{% static 'vendor/bootstrap-4.1/bootstrap.min.css' %}" rel="stylesheet" media="all">

<!-- Vendor CSS -->
<link href="{% static 'vendor/animsition/animsition.min.css' %}" rel="stylesheet" media="all">
<link href="{% static 'vendor/bootstrap-progressbar/bootstrap-progressbar-3.3.4.min.css' %}" rel="stylesheet" media="all">
<link href="{% static 'vendor/wow/animate.css' %}" rel="stylesheet" media="all">
<link href="{% static 'vendor/css-hamburgers/hamburgers.min.css' %}" rel="stylesheet" media="all">
<link href="{% static 'vendor/slick/slick.css' %}" rel="stylesheet" media="all">
<link href="{% static 'vendor/select2/select2.min.css' %}" rel="stylesheet" media="all">
<link href="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.css' %}" rel="stylesheet" media="all">

<!-- Main CSS -->
<link href="{% static 'css/css/theme.css' %}" rel="stylesheet" media="all">


</head>

<body class="animsition">
    <div class="page-wrapper">
        <!-- HEADER DESKTOP-->
        <header class="header-desktop4">
            <div class="container">
                <div class="header4-wrap">
                    <div class="header__logo">
                        <a href="#">
                            <img src="{% static 'images/images/icon/logo2.png' %}" alt="CoolAdmin" />
                        </a>
                    </div>
                    <div class="header__tool">
      
       
                        <div class="account-wrap">
                            <div class="account-item account-item--style2 clearfix js-item-menu">
                                <div class="image">
                                    <img src="{% if staff.img %}{{ staff.img.url|safe }}{% else %}{% static 'images/default_avatar.png' %}{% endif %}" alt="Profile Image" />
                                </div>
                                <div class="content">
                                    <a href="#">{{ staff.first_name }} {{ staff.last_name }}</a>
                                </div>
                                <div class="account-dropdown js-dropdown">
                                    <div class="info clearfix">
                                        <div class="image">
                                            <a href="#">
                                                <img src="{% if staff.img %}{{ staff.img.url|safe }}{% else %}{% static 'images/default_avatar.png' %}{% endif %}" alt="Profile Image" />
                                            </a>
                                        </div>
                                        <div class="content">
                                            <h5 class="name">
                                                <a href="#">{{ user.first_name }} {{ user.last_name }}</a>
                                            </h5>
                                            <span class="email">{{user.email}}</span>
                                        </div>
                                    </div>
                                     
                                    <div class="account-dropdown__footer">
                                        <a href="{% url 'logout' %}">
                                            <i class="zmdi zmdi-power"></i>Logout</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- END HEADER DESKTOP -->

        <!-- PAGE CONTENT-->
        <div class="page-container3">
            <section>
                <div class="container">
                    <div class="row">
                        <div class="col-xl-3">
                            <!-- MENU SIDEBAR-->
                            <aside class="menu-sidebar3 js-spe-sidebar">
                                <nav class="navbar-sidebar2 navbar-sidebar3">
                                    <ul class="list-unstyled navbar__list">
                                        <li class="active has-sub">
                                            <a class="js-arrow" href="{% url 'staff' %}">
                                                <i class="fas fa-tachometer-alt"></i>Dashboard 
                                            </a>

                                        </li>
                                        <li>
                                            <a href="{% url 'staffprofile' %}">
                                                <i class="fas fa-chart-bar"></i>Profile</a>
                                    
                                        </li>
                                        <li>
                                            <a href="{%url 'staffpayment'%}">
                                                <i class="fas fa-shopping-basket"></i>Details</a>
                                        </li>

                                    </ul>
                                </nav>
                            </aside>
                            <!-- END MENU SIDEBAR-->
                        </div>
                        <div class="col-xl-9">
                            <!-- PAGE CONTENT-->
                            <section class="welcome p-t-10">
                                <div class="container">
                                    <h2>Player Update</h2>
                                    <form id="form" method="post" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <label for="first_name">First Name:</label>
                                        <input class="au-input au-input--full" type="text" id="first_name" name="first_name" value="{{ user.first_name }}"><br>
                                        <span id="firstNameError" class="error-message"></span><br>
                                    
                                        <label for="last_name">Last Name:</label>
                                        <input class="au-input au-input--full" type="text" id="last_name" name="last_name" value="{{ user.last_name }}"><br>
                                        <span id="lastNameError" class="error-message"></span><br>
                                    
                                        <label for="age">Age:</label>
                                        <input class="au-input au-input--full" type="number" id="age" name="age" value="{{ user.age }}"><br>
                                        <span id="ageError" class="error-message"></span><br>
                                        
                                    
                                        <label for="image">Profile Image:</label>
                                        <input class="au-input au-input--full" type="file" id="image" name="image" accept=".jpg, .jpeg, .png"><br><br>
                                        <span id="fileTypeError" class="error-message"></span><br>

                                        <button class="au-btn au-btn--block au-btn--green m-b-20" type="submit" value="Update">Submit</button>
                                    </form>
                                    
                                    <script>
                    const form = document.getElementById("form");
                    const fnameInput = document.getElementById("first_name");
                    const lnameInput = document.getElementById("last_name");
                    const ageInput = document.getElementById("age");
                    const imageInput = document.getElementById("image");
                    const ageError = document.getElementById("ageError");
                    
                    
                    // Add an "input" event listener to the First Name input
                    fnameInput.addEventListener("input", () => {
                        validateAlphabetsOnly(fnameInput, "firstNameError");
                    });
                    
                    // Add an "input" event listener to the Last Name input
                    lnameInput.addEventListener("input", () => {
                        validateAlphabetsOnly(lnameInput, "lastNameError");
                    });
                    
                    // Add an "input" event listener to the Date of Birth input
                    ageInput.addEventListener("input", () => {
                        validateDateOfBirth(ageInput, "ageError");
                    });
                    
                    // Add an "input" event listener to the Jersey Number input
                    
                    // Add a "change" event listener to the Image input for file type validation
                    imageInput.addEventListener("change", () => {
                        validateImageFileType(imageInput);
                    });
                    
// Function to validate that only alphabets are entered
function validateAlphabetsOnly(inputElement, errorSpanId) {
    const inputValue = inputElement.value.trim(); // Remove leading and trailing white spaces
    const regex = /^[a-zA-Z]+$/;
    const errorSpan = document.getElementById(errorSpanId);

    if (!regex.test(inputValue) || inputValue === "") {
        inputElement.classList.add("error");
        errorSpan.textContent = "Enter valid name";
    } else {
        inputElement.classList.remove("error");
        errorSpan.textContent = "";
    }
}

// Function to validate file type
function validateImageFileType(inputElement) {
    const allowedExtensions = ["jpg", "jpeg", "png"];
    const fileName = inputElement.value.toLowerCase().trim(); // Remove leading and trailing white spaces
    const fileExtension = fileName.substring(fileName.lastIndexOf(".") + 1);
    const fileTypeError = document.getElementById("fileTypeError");

    if (!fileName || !allowedExtensions.includes(fileExtension)) {
        inputElement.classList.add("error");
        fileTypeError.textContent = "Please select a JPG or PNG image.";
    } else {
        inputElement.classList.remove("error");
        fileTypeError.textContent = "";
    }
}

                    
                    // Add a "submit" event listener to the form for final validation
                    form.addEventListener("submit", (event) => {
                    const isFirstNameValid = validateAlphabetsOnly(fnameInput, "firstNameError");
                    const isLastNameValid = validateAlphabetsOnly(lnameInput, "lastNameError");
                    const isDateOfBirthValid = validateDateOfBirth(ageInput, "ageError");
                    const isImageFileTypeValid = validateImageFileType(imageInput);
    
                    if (!isFirstNameValid || !isLastNameValid || !isDateOfBirthValid || !isImageFileTypeValid) {
                          event.preventDefault(); // Prevent form submission
                         }
                    });

                    
                                    </script>
                                    </div>
                            </section>
                            <!-- END PAGE CONTENT-->
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <!-- END PAGE CONTENT  -->

    </div>

<!-- Jquery JS -->
<script src="{% static 'vendor/jquery-3.2.1.min.js' %}"></script>
<!-- Bootstrap JS -->
<script src="{% static 'vendor/bootstrap-4.1/popper.min.js' %}"></script>
<script src="{% static 'vendor/bootstrap-4.1/bootstrap.min.js' %}"></script>
<!-- Vendor JS -->
<script src="{% static 'vendor/slick/slick.min.js' %}"></script>
<script src="{% static 'vendor/wow/wow.min.js' %}"></script>
<script src="{% static 'vendor/animsition/animsition.min.js' %}"></script>
<script src="{% static 'vendor/bootstrap-progressbar/bootstrap-progressbar.min.js' %}"></script>
<script src="{% static 'vendor/counter-up/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'vendor/counter-up/jquery.counterup.min.js' %}"></script>
<script src="{% static 'vendor/circle-progress/circle-progress.min.js' %}"></script>
<script src="{% static 'vendor/perfect-scrollbar/perfect-scrollbar.js' %}"></script>
<script src="{% static 'vendor/chartjs/Chart.bundle.min.js' %}"></script>
<script src="{% static 'vendor/select2/select2.min.js' %}"></script>
<!-- Main JS -->
<script src="{% static 'js/js/main.js' %}"></script>

</body>

</html>
<!-- end document-->